webpackJsonp([2],{"/Vks":function(n,e){function t(n,e,t){var r=e[0],o=e[1],i=t[0]-r,a=t[1]-o;if(0!==i||0!==a){var l=((n[0]-r)*i+(n[1]-o)*a)/(i*i+a*a);l>1?(r=t[0],o=t[1]):l>0&&(r+=i*l,o+=a*l)}return(i=n[0]-r)*i+(a=n[1]-o)*a}function r(n,e){var r=n.length-1,o=[n[0]];return function n(e,r,o,i,a){for(var l,u=i,c=r+1;c<o;c++){var s=t(e[c],e[r],e[o]);s>u&&(l=c,u=s)}u>i&&(l-r>1&&n(e,r,l,i,a),a.push(e[l]),o-l>1&&n(e,l,o,i,a))}(n,0,r,e,o),o.push(n[r]),o}function o(n,e,t){if(n.length<=2)return n;var o=void 0!==e?e*e:1;return n=r(n=t?n:function(n,e){for(var t,r,o,i,a,l=n[0],u=[l],c=1,s=n.length;c<s;c++)t=n[c],o=l,i=(r=t)[0]-o[0],a=r[1]-o[1],i*i+a*a>e&&(u.push(t),l=t);return l!==t&&u.push(t),u}(n,o),o)}n.exports=o,n.exports.default=o},"9SxT":function(n,e,t){"use strict";var r={angle:0,currentState:"intro",lineDensity:28,lineWidth:1,smoothSteps:1,mapOpacity:100,heightScale:42,oceanLevel:0,aboutVisible:!1,error:null,zazzleLink:null,generatingPreview:!1,settingsOpen:!1,shouldDraw:!1,renderProgress:null,width:window.innerWidth,height:window.innerHeight,showThemeDetails:!1,selectedTheme:"default",themes:[{value:"default",name:"default",backgroundColor:"#F7F2E8",lineBackground:"#F7F2E8",lineColor:"rgb(22, 22, 22)"},{value:"dark",name:"dark",backgroundColor:"#3C3D3D",lineBackground:"#3C3D3D",lineColor:"#ffffff"},{value:"blue",name:"blue",backgroundColor:"#101E33",lineBackground:"#101E33",lineColor:"#D1D8E3"}],backgroundColor:{r:247,g:242,b:232,a:1},lineBackground:{r:247,g:242,b:232,a:1},lineColor:{r:22,g:22,b:22,a:1}};e.a=r},NHnr:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("9SxT"),o=t("1e2d"),i=t.n(o),a=t("5dBV"),l=t.n(a);function u(n,e){var t=[],r=void 0,o={serialize:function(){return'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: https://github.com/anvaka/peak-map  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 '+n+" "+e+"\">\n<g id='paths'>\n   "+t.map(function(n){return n.serialize()}).join("\n")+"\n</g>\n</svg>"},beginPath:function(){r=function(){var n=[],e=null,t=void 0,r=void 0,o=0;return{lineTo:function(t,r){o+=1;var i="L"===e?"":"L";n.push(""+i+c(t)+" "+c(r)),e="L"},moveTo:function(t,r){var o="M"===e?"":"M";n.push(""+o+c(t)+" "+c(r)),e="M"},serialize:function(){var e=t?'stroke="'+t+'" ':"",o=1!==r?'stroke-width="'+r+'"':"";return'<path d="'+n.join(" ")+'" fill="none" '+e+o+"></path>"},isEmpty:function(){return 0===o},setStroke:function(n){t=n},setLineWidth:function(n){r=n}}}()},lineTo:function(n,e){r.lineTo(n,e)},moveTo:function(n,e){r.moveTo(n,e)},stroke:function(){r&&!r.isEmpty()&&(o.strokeStyle&&r.setStroke(o.strokeStyle),o.lineWidth&&r.setLineWidth(o.lineWidth),t.push(r))},lineWidth:1,strokeStyle:"#161616"};return o}function c(n){return Math.round(100*n)/100}function s(n,e,t){var r=void 0,o=void 0;return i(),{cancel:function(){cancelAnimationFrame(r),n.renderProgress=null},render:i};function i(i){n.renderProgress&&(n.renderProgress.message="Rendering...");var s=l()(n.oceanLevel),d=parseFloat(n.smoothSteps);t.style.opacity=n.mapOpacity/100;var h=t.getContext("2d"),f=c(n.lineColor),g=c(n.lineBackground),m=l()(n.lineWidth),v=e.windowHeight,w=window.innerWidth,p=Math.round(v*n.lineDensity/100),x=n.heightScale,y=e.getAllHeightData(),k=y.minHeight,b=y.maxHeight,T=y.rowWithHighestPoint,M=function(n,e,t){var r=Math.round(e/n),o=t-Math.floor(t/r)*r,i=o+r*Math.floor((e-o)/r);return{start:o,stop:i,step:r}}(p,v,T),P=b-k,S=[],W=M.start,D=void 0;if(o=window.innerHeight,i){f=c(n.lineColor,!0),D=new Float32Array(window.innerWidth),W=M.stop;for(var z=0;z<window.innerWidth;++z)D[z]=o;return function(){for(var t=u(window.innerWidth,window.innerHeight),r=0,o=window.innerWidth,i=W;i>0;i-=M.step){C(S,t),S=[];var a=r%2==0;r+=1;for(var l=0;l<o;l+=1){var c=a?l:o-1-l,d=e.getHeightAtPoint(c,i),h=i-Math.floor(x*(d-k)/P);d<=s?(C(S,t),S=[]):S.push(c,h)}W=i-M.step}if(C(S,t),n.renderProgress=null,t.serialize)return t.serialize()}()}return h.beginPath(),h.clearRect(0,0,w,v),h.fillStyle=c(n.backgroundColor),h.fillRect(0,0,w,v),function t(){var o=performance.now();for(var i=W;i<=M.stop;i+=M.step){H(S),S=[];for(var a=0;a<window.innerWidth;++a){var l=e.getHeightAtPoint(a,i),u=i-Math.floor(x*(l-k)/P);l<=s?(H(S),S=[]):S.push(a,u)}W=i+M.step;var c=performance.now()-o;if(c>200)return void(r=requestAnimationFrame(t))}H(S);n.renderProgress=null}();function C(n,e){if(!(n.length<3)){n=a(n,d).points,e.beginPath(),e.strokeStyle=f,e.lineWidth=m;for(var t=!1,r=0;r<n.length;r+=2){var i=n[r],l=n[r+1],u=D[i],c=l<=u&&l>=0&&l<o;c?(D[i]=Math.min(l,u),t?e.lineTo(i,l):e.moveTo(i,l)):t?e.lineTo(i,l<0?0:u):e.moveTo(i,l<0?0:u),t=c}e.stroke()}}function H(n){if(!(n.length<3)){var e=a(n,d);if(n=e.points,e.max-e.min>2){h.beginPath(),h.fillStyle=g,h.moveTo(n[0],n[1]);for(var t=2;t<n.length;t+=2)h.lineTo(n[t],n[t+1]);h.lineTo(n[n.length-2],e.max),h.lineTo(n[0],e.max),h.closePath(),h.fill()}h.beginPath(),h.strokeStyle=f,h.lineWidth=m,h.moveTo(n[0],n[1]);for(var r=2;r<n.length;r+=2)h.lineTo(n[r],n[r+1]);h.stroke()}}}function a(n,e){for(var t=[],r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,i=n.length/2,a=0;a<i;a+=1){for(var l=a-e,u=a+e+1,c=0,s=0,d=l>=0?l:0;d<u&&d<i;d+=1)s+=n[2*d+1],c+=1;var h=s/c;t[2*a]=n[2*a],t[2*a+1]=h,r<h&&(r=h),o>h&&(o=h)}return{points:t,min:o,max:r}}function c(n,e){return e?"#"+d(n.r)+d(n.g)+d(n.b):"rgba("+n.r+", "+n.g+", "+n.b+", "+n.a+")"}}function d(n){if(0===n)return"00";var e=n.toString(16);return n<16?"0"+e:e}var h="pk.eyJ1IjoiYW52YWthIiwiYSI6ImNrNWRqcDdnNTF4MHYzbXAzNDJzODludnYifQ.2WDAbuAzUuchNtCAcZitAw",f=t("//Fk"),g=t.n(f),m=t("ifoU"),v=t.n(m);t("Wj7o"),t("/Vks");function w(n){return e;function e(){return!0}}var p="https://api.mapbox.com/v4/mapbox.terrain-rgb/zoom/tLong/tLat@2x.pngraw?access_token="+h,x=new v.a;function y(n,e,t){e||(e={});var r=n.transform,o=r.tileSize,i=r.tileZoom,a=Math.pow(2,i),l=n.transform.coveringTiles({minzoom:i,maxzoom:i,tileSize:o}),u=l.reduce(function(n,e){var t=e.canonical;return n.minX>t.x&&(n.minX=t.x),n.minY>t.y&&(n.minY=t.y),n.maxX<t.x&&(n.maxX=t.x),n.maxY<t.y&&(n.maxY=t.y),n},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),c=u.maxX-u.minX,s=u.maxY-u.minY;if(c>50||s>50)throw new Error("Too many tiles requested. How did you do it?");var d=window.innerHeight;if(!n.transform.angle&&!n.transform.bearing){var h=n.getBounds().getSouthEast();h.lat=function(n,e){var t=Math.PI-2*Math.PI*n/e;return 180/Math.PI*Math.atan(.5*(Math.exp(t)-Math.exp(-t)))}(u.maxY+1,a),d=n.project(h).y}var f=document.createElement("canvas");f.width=(c+1)*o,f.height=(s+1)*o;var m=f.getContext("2d"),v=u.minX,y=u.minY;e.total=l.length,M();var k=void 0,b=!1,T=l.map(function(n){var e=function(n){var e=n.canonical;return{url:p.replace("zoom",e.z).replace("tLat",e.y).replace("tLong",e.x),x:o*(e.x-u.minX),y:o*(e.y-u.minY)}}(n);return function(n){var e=x.get(n);e||(e=new g.a(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.crossOrigin="anonymous",r.src=n}),x.set(n,e));return e}(e.url).then(function(n){m.drawImage(n,e.x,e.y)}).catch(function(){m.beginPath(),m.fillStyle="#0186a0",m.fillRect(e.x,e.y,o,o)}).finally(M)});return g.a.all(T).then(function(){var e=f.width,t=m.getImageData(0,0,e,f.height).data,r=window.innerWidth,i=new Float32Array(r*d),l=void 0,u=16,c=1/0,s=-1/0,h=-1,p=0,x=w();return k=requestAnimationFrame(function n(){for(var e=window.performance.now(),t=p;t<d;++t){for(var o=0;o<r;++o){var a=t*r+o,f=T(o,t,x);i[a]=f,f<c&&(c=f),f>s&&(s=f,h=t)}var g=window.performance.now()-e;if(g>u)return void(b||(k=requestAnimationFrame(n)));p=t}l({minHeight:c,maxHeight:s,rowWithHighestPoint:h,allHeights:i,windowWidth:r,windowHeight:d})}),new g.a(function(n){l=n});function T(r,i,l){var u=n.transform.pointLocation({x:r,y:i});if(!l([u.lng,u.lat]))return-20;var c=function(n,e){return(n+180)/360*e}(u.lng,a),s=(c-v)*o,d=function(n,e){var t=n*Math.PI/180;return(1-Math.log(Math.tan(t)+1/Math.cos(t))/Math.PI)/2*e}(u.lat,a),h=(d-y)*o,f=Math.round(h),g=Math.round(s),m=4*(f*e+g),w=t[m+0],p=t[m+1],x=t[m+2];return function(n,e,t){var r=.1*(256*n*256+256*e+t)-1e4;r<-100&&(r/=5e3);return r}(w,p,x)}}).then(function(n){var e=n.windowWidth,t=n.allHeights;return{getHeightAtPoint:function(n,r){return t[n+r*e]},windowHeight:d,getAllHeightData:function(){return n}}}).then(function(n){b||t(n)}),{cancel:function(){b=!0,cancelAnimationFrame(k)}};function M(){void 0===e.completed&&(e.completed=-1),e.completed=Math.min(e.total,e.completed+1),e.message="Downloading tiles: "+e.completed+" of "+e.total+"..."}}var k=t("xQT3");window.addEventListener("error",function(n){if("function"!=typeof ga)return;var e=n?n.message+" in "+n.filename+":"+n.lineno:"Unknown exception";ga("send","exception",{exDescription:e,exFatal:!1})}),t.e(0).then(function(){t("WOBu")}.bind(null,t)).catch(t.oe);var b=void 0,T=void 0,M=void 0;function P(){r.a.zazzleLink=null;var n=document.querySelector(".height-map");n&&(n.style.opacity=.02)}function S(){if(b){var n=document.querySelector(".height-map");n&&(T&&T.cancel(),M&&M.cancel(),r.a.shouldDraw?(n.style.display="",r.a.renderProgress={message:"",isCancelled:!1,completed:!1},M=y(b,r.a.renderProgress,function(e){T=s(r.a,e,n)})):n.style.display="none")}}r.a.init=function(){i.a.accessToken=h,window.map=b=new i.a.Map({trackResize:!0,container:"map",minZoom:0,style:"mapbox://styles/mapbox/light-v10",center:[-122.574,47.727],zoom:7.68,hash:!0}),b.addControl(new i.a.NavigationControl({showCompass:!1}),"bottom-right"),b.addControl(new k({accessToken:i.a.accessToken})),b.on("moveend",function(){b.once("idle",S)}),b.on("movestart",P),b.on("load",function(){r.a.angle=b.getBearing()}),b.dragRotate.disable(),b.touchZoomRotate.disableRotation()},r.a.redraw=function(){if(!T)return;T.cancel(),T.render()},r.a.updateMap=S,r.a.exportToSVG=function(){if(!T)return;return T.render(!0)}}},["NHnr"]);
//# sourceMappingURL=app.64765544114b0373f494.js.map